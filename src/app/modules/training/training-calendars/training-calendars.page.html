<ion-header class="safe-area-top">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button text="" icon="chevron-back-outline" default-href="home"></ion-back-button>
    </ion-buttons>
    <ion-title>{{ 'training_calendars' | translate }}</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="bg_color">
  @if (show()) {
    <div class="calendar-container">
      @for (item of trainingCalendars(); track item.id) {
        <ion-card class="calendar-card">
          <ion-card-header>
            <ion-card-title>{{ item.title }}</ion-card-title>
            <ion-card-subtitle class="date-range">
              <ion-icon name="calendar-outline"></ion-icon>
              {{ item.from }} - {{ item.to }}
            </ion-card-subtitle>
          </ion-card-header>

          <ion-card-content>
            <p class="content-text">{{ item.content }}</p>
          </ion-card-content>

          <div class="card-footer">
            <ion-button fill="clear" size="small" (click)="showTrainingCalendar(item)" color="secondary">
              <ion-icon slot="start" name="add-circle-outline"></ion-icon>
              {{ 'add_results' | translate }}
            </ion-button>

            @if (!item.video) {
              <ion-button fill="clear" size="small" (click)="addVideoTrainingCalendar(item)" color="primary">
                <ion-icon slot="start" name="videocam-outline"></ion-icon>
                {{ 'add_video' | translate }}
              </ion-button>
            }
          </div>
        </ion-card>
      } @empty {
        <div class="no-results-wrapper">
          <ion-icon name="clipboard-outline"></ion-icon>
          <p>{{ 'no_results' | translate }}</p>
        </div>
      }

      @if (trainingCalendars().length > 0) {
        <ion-infinite-scroll threshold="10%" (ionInfinite)="onIonInfinite($event)">
          <ion-infinite-scroll-content
            [loadingText]="'please_wait' | translate"
            loadingSpinner="bubbles">
          </ion-infinite-scroll-content>
        </ion-infinite-scroll>
      }
    </div>
  } @else {
    <div class="ion-text-center ion-padding">
      <ion-spinner name="crescent"></ion-spinner>
    </div>
  }
</ion-content>
