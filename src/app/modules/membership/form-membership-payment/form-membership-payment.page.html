<ion-header class="ion-no-border">
  <ion-toolbar>

    <ion-buttons slot="start">
      <ion-back-button
        text=""
        icon="chevron-back-outline"
        defaultHref="home">
      </ion-back-button>
    </ion-buttons>

    <ion-title>
      {{ 'create_membership_payment' | translate }}
    </ion-title>

  </ion-toolbar>
</ion-header>

<ion-content class="bg_color ion-padding">

  <!-- SKELETON -->
  @if (!show()) {
    <div>
      @for (i of [1, 2, 3, 4]; track i) {
        <div class="skeleton-card ion-margin-bottom">
          <ion-skeleton-text
            animated
            style="width: 30%; height: 16px; margin-bottom: 10px;">
          </ion-skeleton-text>

          <ion-skeleton-text
            animated
            style="width: 100%; height: 52px; border-radius: 12px;">
          </ion-skeleton-text>
        </div>
      }
    </div>
  }

  <!-- CONTENT -->
  @if (show()) {
    <div class="dashboard-wrapper animate__animated animate__fadeIn">

      <!-- PAYMENT DETAILS -->
      <div class="section-container">
        <h3 class="section-label-slate">
          {{ 'payment_details' | translate }}
        </h3>

        <div class="form-card">

          <!-- AMOUNT -->
          <div class="input-group">
            <label class="field-label">
              {{ 'amount' | translate }}*
            </label>

            <div class="custom-input-box">
              <ion-input
                type="number"
                placeholder="0.00"
                [(ngModel)]="payment().amount">
              </ion-input>

<!--              <span class="currency-tag">EUR</span>-->
            </div>
          </div>

          <!-- DATE -->
          <div class="input-group ion-margin-top">
            <label class="field-label">
              {{ 'date' | translate }}
            </label>

            <div class="date-picker-wrapper">
              <ion-datetime
                presentation="date"
                [preferWheel]="true"
                [max]="maxDate()"
                [(ngModel)]="payment().date">
              </ion-datetime>
            </div>
          </div>

          <!-- DATE EXPIRED -->
          @if (showEndDate()) {
            <div class="input-group ion-margin-top">
              <label class="field-label">
                {{ 'date_expired' | translate }}
              </label>

              <div class="date-picker-wrapper">
                <ion-datetime
                  presentation="date"
                  [preferWheel]="true"
                  [(ngModel)]="payment().date_expired">
                </ion-datetime>
              </div>
            </div>
          }

        </div>
      </div>

      <!-- MEMBERSHIP PERIOD -->
      @if (showMemberships()) {
        <div class="section-container">
          <h3 class="section-label-slate">
            {{ 'membership_period' | translate }}
          </h3>

          <div class="form-card row-layout">

            <!-- YEAR -->
            <div class="input-group select-section">
              <label class="field-label">
                {{ 'year' | translate }}
              </label>

              <div class="custom-select-box">
                <ion-select
                  interface="popover"
                  placeholder="{{ 'year' | translate }}"
                  [value]="year()"
                  (ionChange)="year.set($event.detail.value)">
                  @for (item of years(); track item.year) {
                    <ion-select-option [value]="item.year">
                      {{ item.year }}
                    </ion-select-option>
                  }
                </ion-select>
              </div>
            </div>

            <!-- MONTH -->
            <div class="input-group select-section">
              <label class="field-label">
                {{ 'month' | translate }}
              </label>

              <div class="custom-select-box">
                <ion-select
                  interface="popover"
                  placeholder="{{ 'month' | translate }}"
                  [value]="month()"
                  (ionChange)="month.set($event.detail.value)">
                  @for (item of months(); track item) {
                    <ion-select-option [value]="item">
                      {{ ('month_' + item) | translate }}
                    </ion-select-option>
                  }
                </ion-select>
              </div>
            </div>

          </div>
        </div>
      }

      <!-- PAYER INFO -->
      <div class="section-container">
        <h3 class="section-label-slate">
          {{ 'payer_info' | translate }}
        </h3>

        <div class="form-card flex-col">

          <!-- PAYMENT METHOD -->
          <div class="input-group">
            <label class="field-label">
              {{ 'payment_method' | translate }}*
            </label>

            <div class="custom-select-box">
              <ion-select
                interface="popover"
                placeholder="{{ 'payment_method' | translate }}"
                [(ngModel)]="payment().payment_method">
                @for (item of paymentMethods(); track item) {
                  <ion-select-option [value]="item">
                    {{ ('payment_method_' + item) | translate }}
                  </ion-select-option>
                }
              </ion-select>
            </div>
          </div>

          <!-- PAYER NAME -->
          <div class="input-group ion-margin-top">
            <label class="field-label">
              {{ 'payer_name' | translate }}
            </label>

            <div class="custom-input-box">
              <ion-input
                type="text"
                [(ngModel)]="payment().payer_name">
              </ion-input>
            </div>
          </div>

          <!-- SLIP NUMBER -->
          <div class="input-group ion-margin-top">
            <label class="field-label">
              {{ 'payment_slip_number' | translate }}
            </label>

            <div class="custom-input-box">
              <ion-input
                type="text"
                [(ngModel)]="payment().payment_slip_number">
              </ion-input>
            </div>
          </div>
        </div>
      </div>
    <ion-item><br></ion-item>
    </div>
  }

</ion-content>

<ion-footer class="ion-no-border ion-padding-start ion-padding-end">
  <ion-button
    expand="block"
    class="save-btn mt-6"
      (click)="save()"
      [disabled]="clicked()">

      @if (clicked()) {
        <ion-spinner
          name="crescent"
          slot="start">
        </ion-spinner>
      }

      {{ 'save' | translate }}
    </ion-button>
</ion-footer>
